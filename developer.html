<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.23.0">
    <meta name="project" content="OLI Torus v0.4.1">

    <title>Developer â€” OLI Torus v0.4.1</title>
    <link rel="stylesheet" href="dist/elixir-9f91ebe876dc01d67920.css" />

    <script src="dist/sidebar_items-d7c5bd411a.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-60a0c9f10e9e52eae31f.js"></script>

  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode') === 'true') document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="http://oli.cmu.edu" class="sidebar-projectName">
OLI Torus
      </a>
      <strong class="sidebar-projectVersion">
        v0.4.1
      </strong>
    </div>

      <a href="http://oli.cmu.edu">
        <img src="assets/logo.png" alt="OLI Torus" class="sidebar-projectImage">
      </a>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>


      <li><a id="tasks-list" href="#full-list">Mix Tasks</a></li>

  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>Developer</h1><h3 id="general-notes" class="section-heading">
  <a href="#general-notes" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  General Notes
</h3>
<ul><li><a href="https://github.com/riverrun/bcrypt_elixir">bcrypt_elixir</a> requires &gt;1 CPU core to function. If you have only one core, on say a small VPS, your release will crash without giving a useful error message!! For a single core host, use Pbkdf2 instead of Bcrypt. See here for more on this: <a href="https://github.com/riverrun/comeonin/wiki/Deployment">https://github.com/riverrun/comeonin/wiki/Deployment</a></li><li>Link account using social login will not work out of the box in development mode! This is because you must configure an exact url with the OAuth provider, and therefore a local ngrok tunnel address will not work. If you really need this to work, you can configure your OAuth provider with your temporary ngrok address e.g. <code class="inline">https://163400959f6a.ngrok.io/auth/google/link/callback</code>. Be sure to also set your HOST in oli.env to your ngrok address as well (e.g. <code class="inline">HOST=https://163400959f6a.ngrok.io</code>) or else you will be redirected to localhost by default after login and the user session will not be present for linking, because it was stored in the session for the ngrok address. Because of this complexity, it is recommended to simply use an email account to link accounts, which does not experience this issue.</li></ul><h2 id="access-generated-emails-in-development" class="section-heading">
  <a href="#access-generated-emails-in-development" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Access Generated Emails in Development
</h2>
<p>When the system generates email in production, generally it will be handed to an email service such as Amazon SES. Any email service supported by Bamboo can be configured in config/prod.exs. Refer to the Bamboo and Pow docs to see a list of all supported email adapters and how to configure them <a href="https://hexdocs.pm/pow/configuring_mailer.html#content,">https://hexdocs.pm/pow/configuring_mailer.html#content,</a><a href="https://hexdocs.pm/bamboo/readme.html">https://hexdocs.pm/bamboo/readme.html</a></p><p>In development mode, the system will use the Bamboo.LocalAdapter mailer, which stores sent mail in memory and is accessible via web browser at <code class="inline">https://localhost/dev/sent_emails</code>. There is also a specific test adapter configured for unit testing.</p><h2 id="create-registrations-from-seed" class="section-heading">
  <a href="#create-registrations-from-seed" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Create Registrations from seed
</h2>
<p>To ease the burden of creating a new registration after every database reset, there is the option to automatically create LTI registrations
attached to the default institution in dev environment by creating a registrations.json file in the project root.</p><p>Example:</p><pre><code class="nohighlight makeup elixir"><span class="p" data-group-id="3182314668-1">[</span><span class="p" data-group-id="3182314668-2">{</span><span class="w">
  </span><span class="ss">&quot;issuer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;client_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;XXXXXXXXXXXXX&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;key_set_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/api/lti/security/jwks&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_token_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/login/oauth2/token&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_login_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/api/lti/authorize_redirect&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu&quot;</span><span class="w">
</span><span class="p" data-group-id="3182314668-2">}</span><span class="p" data-group-id="3182314668-1">]</span></code></pre><p>With this file, now when you run <code class="inline">mix ecto.seed</code> or <code class="inline">mix ecto.reset</code>, a registration with these details will be created for you.</p>
      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.23.0) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>

  </body>
</html>
